#the compiler
CPP = g++
CC = gcc

#compiler options

CPPOPTS = -O3 -g -Wall -c $(shell sdl-config --cflags) -Wno-deprecated -std=c99

#header files
INCLUDES = \
	-I. 					\
	$(NULL)

#library directories
LIBDIRS = \
	$(NULL)

#libraries to link with
LIBS = \
	-L.			\
	-lGL			\
	$(NULL)

#all compiler flags
CFLAGS = $(CPPOPTS) $(INCLUDES)

#all linker options and libs
LFLAGS = $(LIBDIRS) $(shell sdl-config --libs)

#default compilation rules
%.o:	%.cpp
	$(CPP) -c $< $(CFLAGS) -o $@

%.o:	%.c
	$(CC) -c $< $(CFLAGS) -o $@

#local headers to depend on
HEADERS = \
        polyfonttypes.h		\
        polyfonts.h		\
	sgl.h			\
	$(NULL)

#files to compile
CCFILES = \
	fonts/pfSFutura.c \
	polyfonts.c		\
	sgl.c			\
	$(NULL)

FONTFILES = \
	fonts/pfSAstrology.c \
	fonts/pfSCursive.c \
	fonts/pfSCyrillic.c \
	fonts/pfSFuturaMono.c \
	fonts/pfSGothicEnglish.c \
	fonts/pfSGothicGerman.c \
	fonts/pfSGothicItalian.c \
	fonts/pfSGreek.c \
	fonts/pfSJapanese.c \
	fonts/pfSMarkers.c \
	fonts/pfSMathLower.c \
	fonts/pfSMathUpper.c \
	fonts/pfSMeteorology.c \
	fonts/pfSMusic.c \
	fonts/pfSScript.c \
	fonts/pfSSymbolic.c \
	fonts/pfSTimesBold.c \
	fonts/pfSTimesBoldItalic.c \
	fonts/pfSTimesGreek.c \
	fonts/pfSTimes.c \
	fonts/pfSTimesItalic.c \
	fonts/pfSRoman.c \
	fonts/pfSRomanMono.c \
	fonts/pfOSans16.c \
	fonts/pfOSans7.c \
	fonts/pfOSans8.c \
	fonts/pfOSansBold16.c \
	fonts/pfOSansBold7.c \
	fonts/pfOSansBold8.c \
	fonts/pfOSansBoldItalic16.c \
	fonts/pfOSansBoldItalic7.c \
	fonts/pfOSansBoldItalic8.c \
	fonts/pfOSansItalic16.c \
	fonts/pfOSansItalic7.c \
	fonts/pfOSansItalic8.c \
	fonts/pfOSansMono16.c \
	fonts/pfOSansMono7.c \
	fonts/pfOSansMono8.c \
	fonts/pfOSansMonoBold16.c \
	fonts/pfOSansMonoBold7.c \
	fonts/pfOSansMonoBold8.c \
	fonts/pfOSansMonoBoldItalic16.c \
	fonts/pfOSansMonoBoldItalic7.c \
	fonts/pfOSansMonoBoldItalic8.c \
	fonts/pfOSansMonoItalic16.c \
	fonts/pfOSansMonoItalic7.c \
	fonts/pfOSansMonoItalic8.c \
	fonts/pfOSerif16.c \
	fonts/pfOSerif7.c \
	fonts/pfOSerif8.c \
	fonts/pfOSerifBold16.c \
	fonts/pfOSerifBold7.c \
	fonts/pfOSerifBold8.c \
	fonts/pfPSans16.c \
	fonts/pfPSans7.c \
	fonts/pfPSans8.c \
	fonts/pfPSansBold16.c \
	fonts/pfPSansBold7.c \
	fonts/pfPSansBold8.c \
	fonts/pfPSansBoldItalic16.c \
	fonts/pfPSansBoldItalic7.c \
	fonts/pfPSansBoldItalic8.c \
	fonts/pfPSansItalic16.c \
	fonts/pfPSansItalic7.c \
	fonts/pfPSansItalic8.c \
	fonts/pfPSansMono16.c \
	fonts/pfPSansMono7.c \
	fonts/pfPSansMono8.c \
	fonts/pfPSansMonoBold16.c \
	fonts/pfPSansMonoBold7.c \
	fonts/pfPSansMonoBold8.c \
	fonts/pfPSansMonoBoldItalic16.c \
	fonts/pfPSansMonoBoldItalic7.c \
	fonts/pfPSansMonoBoldItalic8.c \
	fonts/pfPSansMonoItalic16.c \
	fonts/pfPSansMonoItalic7.c \
	fonts/pfPSansMonoItalic8.c \
	fonts/pfPSerif16.c \
	fonts/pfPSerif7.c \
	fonts/pfPSerif8.c \
	fonts/pfPSerifBold16.c \
	fonts/pfPSerifBold7.c \
	fonts/pfPSerifBold8.c \
	$(NULL)

CPPFILES = \
	$(NULL)

CPPMAINS = \
	glfonts.cpp		\
	sglfonts.cpp		\
	loadfonts.cpp		\
	sgltest.cpp		\
	$(NULL)

CCMAINS = \
	$(NULL)

#all local .o files
FONTS = ${FONTFILES:.c=.o}
OBJS =  ${CPPFILES:.cpp=.o} ${CCFILES:.c=.o}
MAINS = ${CPPMAINS:.cpp=.o} ${CCMAINS:.c=.o}

default: depend loadfonts glfonts sglfonts sgltest

all: glfonts sglfonts sgltest loadfonts

loadfonts: ${OBJS} loadfonts.o
	$(CPP) $(LFLAGS) $(OBJS) loadfonts.o $(LIBS) -o $@

glfonts: ${OBJS} ${FONTS} glfonts.o
	$(CPP) $(LFLAGS) $(OBJS) $(FONTS) glfonts.o $(LIBS) -o $@

sglfonts: ${OBJS} ${FONTS} sglfonts.o
	$(CPP) $(LFLAGS) $(OBJS) $(FONTS) sglfonts.o $(LIBS) -o $@

sgltest: ${OBJS} sgltest.o
	$(CPP) $(LFLAGS) $(OBJS) sgltest.o $(LIBS) -o $@

depend: ${CPPMAINS} ${CPPFILES} ${CCMAINS} ${CCFILES} ${HEADERS}
	rm -f depend \
	; \
	${CPP} -MM -c \
		${CFLAGS} \
		${CPPMAINS} \
		${CPPFILES} \
		${CCMAINS} \
		${CCFILES} \
		> depend

clean:
	rm -f \
		core \
		$(OBJS) \
		$(MAINS) \
		$(FONTS) \
		glfonts \
		sglfonts \
		loadfonts \
		sgltest \
		depend \
		*~

#
# get the depend info
#
include depend
